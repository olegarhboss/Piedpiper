(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"8C5v":function(t,s,e){"use strict";e.r(s);var a=e("L2JU"),r=e("i2el"),o=function(t,s){return r.a.post("/users/"+t,s)},n=function(t,s){return r.a.post("/users/"+t,s)};function i(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,a)}return e}function u(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}var c={data:function(){return{newData:{_method:"PUT",password:"",password_confirmation:""},showResetPass:!1,resetButtonText:"Изменить пароль"}},computed:function(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?i(Object(e),!0).forEach((function(s){u(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}({},Object(a.b)("auth",["authUser"])),methods:{showChangePass:function(){this.showResetPass=!this.showResetPass,this.resetButtonText=this.showResetPass?"Отменить изминение":"Изменить пароль"},userUpdate:function(){o(this.$store.state.auth.user.id,this.newData),this.logout()},userDestroy:function(){n(this.$store.state.auth.user.id,{_method:"DELETE"})},logout:function(){this.$store.dispatch("auth/logout"),this.$router.push({name:"main"})}},mounted:function(){console.log(this.$store.state.auth.user.avatar)}},l=e("KHd+"),d=Object(l.a)(c,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("Учетная запись пользователя")]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"media"},[e("img",{staticClass:"rounded-circle mr-3 mb-3",attrs:{src:t.authUser.avatar,alt:"..."}}),t._v(" "),e("div",{staticClass:"media-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.authUser.name))]),t._v(" "),e("p",{staticClass:"card-text text-info"},[t._v(t._s(t.authUser.email))])])]),t._v(" "),t.showResetPass?e("form",{on:{submit:function(s){return s.preventDefault(),t.userUpdate(s)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Новый пароль")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newData.password,expression:"newData.password"}],staticClass:"form-control form-control-sm",attrs:{type:"password",required:"",id:"exampleInputPassword1"},domProps:{value:t.newData.password},on:{input:function(s){s.target.composing||t.$set(t.newData,"password",s.target.value)}}}),t._v(" "),e("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("После изминения пароля потребуется повторная авторизация.")])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleInputPassword2"}},[t._v("Подтвердите новый пароль")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newData.password_confirmation,expression:"newData.password_confirmation"}],staticClass:"form-control form-control-sm",attrs:{type:"password",required:"",id:"exampleInputPassword2"},domProps:{value:t.newData.password_confirmation},on:{input:function(s){s.target.composing||t.$set(t.newData,"password_confirmation",s.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit"}},[t._v("Сохранить")])]):t._e()]),t._v(" "),e("div",{staticClass:"card-footer text-center"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:t.logout}},[t._v("Выйти")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:t.showChangePass}},[t._v(t._s(t.resetButtonText))]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:t.userDestroy}},[t._v("Удалить профиль")])])])])}),[],!1,null,null,null);s.default=d.exports}}]);