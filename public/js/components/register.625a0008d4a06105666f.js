(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+gvn":function(e,t,r){"use strict";r.r(t);var a=r("4JY7"),i=r("L2JU");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={data:function(){return{email:"",name:"",birthday:"",photo:[],password:"",password_confirmation:"",valid:!0,value:!0,rules:{required:function(e){return!!e||"Необходимо заполнить."},name:function(e){return e.length<=42||"Превышена допустимая длинна"},birthday:function(e){return e.length<=20||"Превышена допустимая длинна"},photo:function(e){return!e||e.size<2e6||"Фото не должно превышать размер в 2 мегабайта!"},email:function(e){return/.+@.+\..+/.test(e)||"Должен быть действительным"},password:function(e){return/^(?=.{8,})/.test(e)||"Минимум 8 символов"}}}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(i.b)("auth",["error","loading","captchaKey"]),{passwordConfirmation:function(){return this.password==this.password_confirmation||"Пароли не совпадают"}}),methods:{onCaptchaExpired:function(){this.$refs.recaptcha.reset()},register:function(e){var t=this,r=new FormData;r.append("email",this.email),r.append("name",this.name),r.append("birthday",this.birthday),r.append("photo",this.photo),r.append("password",this.password),r.append("password_confirmation",this.password_confirmation),r.append("password_confirmation",this.password_confirmation),r.append("device_name","spa"),r.append("recaptchaToken",e),this.$store.dispatch("auth/register",r).then((function(){t.$router.push("/profile")}))},validate:function(){this.$refs.form.validate()&&this.$refs.recaptcha.execute()}},components:{VueRecaptcha:a.a},mounted:function(){this.$store.dispatch("auth/clearError"),this.$load_script("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit")},destroyed:function(){this.$delete_script("https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit")}},s=r("KHd+"),p=Object(s.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mx-auto my-12",attrs:{"max-width":"400"}},[r("v-card-text",[r("div",[e._v("Регистрация")]),e._v(" "),r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.validate(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{counter:42,rules:[e.rules.name],"prepend-icon":"mdi-account-badge-outline",label:"Фамилия Имя Отчество"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{attrs:{type:"date",rules:[e.rules.birthday],"prepend-icon":"mdi-calendar-outline",label:"Дата рождения"},model:{value:e.birthday,callback:function(t){e.birthday=t},expression:"birthday"}}),e._v(" "),r("v-text-field",{attrs:{rules:[e.rules.email],"prepend-icon":"mdi-email-outline",label:"E-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),r("v-file-input",{attrs:{"show-size":"",rules:[e.rules.photo],accept:"image/png, image/jpeg",placeholder:"Загрузите свою фотографию","prepend-icon":"mdi-face-recognition",label:"Фото"},model:{value:e.photo,callback:function(t){e.photo=t},expression:"photo"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"mdi-key-variant",label:"Пароль","append-icon":e.value?"mdi-eye":"mdi-eye-off",type:e.value?"password":"text",rules:[e.rules.password]},on:{"click:append":function(){return e.value=!e.value}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"mdi-key-variant",label:"Подтверждение пароля","append-icon":e.value?"mdi-eye":"mdi-eye-off",type:e.value?"password":"text",rules:[e.passwordConfirmation]},on:{"click:append":function(){return e.value=!e.value}},model:{value:e.password_confirmation,callback:function(t){e.password_confirmation=t},expression:"password_confirmation"}}),e._v(" "),e.error?r("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.error))]):e._e(),e._v(" "),r("vue-recaptcha",{ref:"recaptcha",attrs:{size:"invisible",sitekey:e.captchaKey},on:{verify:e.register,expired:e.onCaptchaExpired}}),e._v(" "),r("v-btn",{staticClass:"mt-4",attrs:{disabled:!e.valid||e.loading,loading:e.loading,block:"",color:"success",type:"submit"}},[e._v("Зарегистрироваться")])],1)],1)],1)}),[],!1,null,null,null);t.default=p.exports},"4JY7":function(e,t,r){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var i=Object.prototype.hasOwnProperty;var n,o,c,s=(n=!1,o=[],c={resolved:function(){return n},resolve:function(e){if(!n){n=!0;for(var t=0,r=o.length;t<r;t++)o[t](e)}},promise:{then:function(e){n?e():o.push(e)}}},{notify:function(){c.resolve()},wait:function(){return c.promise},render:function(e,t,r){this.wait().then((function(){r(window.grecaptcha.render(e,t))}))},reset:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(e)})))},execute:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(e)})))},checkRecaptchaLoad:function(){i.call(window,"grecaptcha")&&i.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!c.resolved())throw new Error("ReCAPTCHA has not been loaded")}});"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=s.notify);var p={name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var e=document.createElement("script");e.id=this.recaptchaScriptId,e.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,e.async=!0,e.defer=!0,document.head.appendChild(e)}},mounted:function(){var e=this;s.checkRecaptchaLoad();var t=a({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),r=this.$slots.default?this.$el.children[0]:this.$el;s.render(r,t,(function(t){e.$widgetId=t,e.$emit("render",t)}))},methods:{reset:function(){s.reset(this.$widgetId)},execute:function(){s.execute(this.$widgetId)},emitVerify:function(e){this.$emit("verify",e)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(e){return e("div",{},this.$slots.default)}};t.a=p}}]);