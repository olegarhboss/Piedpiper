(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8C5v":function(t,e,a){"use strict";a.r(e);var i=a("L2JU");a("C7En");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r={data:function(){return{valid:!0,token_modal:!1,edit_modal:!1,delete_modal:!1,email:"",name:"",birthday:"",photo:[],rules:{name:function(t){return t.length<=42||"Превышена допустимая длинна"},birthday:function(t){return t.length<=20||"Превышена допустимая длинна"},photo:function(t){return""==t||t.size<2e6||"Фото не должно превышать размер в 2 мегабайта!"},email:function(t){return""==t||/.+@.+\..+/.test(t)||"Должен быть действительным"}}}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(i.b)("auth",["authUser","authToken","error","loading"])),methods:{copyToken:function(){var t=this;navigator.clipboard.writeText(this.authToken).then((function(){t.token_modal=!1}))},userEditor:function(){this.edit_modal=!0,this.email=this.authUser.email,this.name=this.authUser.name,this.birthday=this.authUser.b_date},updateProfile:function(){var t=this,e=new FormData;e.append("_method","PUT"),e.append("email",this.email),e.append("name",this.name),e.append("birthday",this.birthday),e.append("photo",this.photo),this.$store.dispatch("auth/update",e).then((function(){t.edit_modal=!1}))},deleteProfile:function(){var t=new FormData;t.append("_method","DELETE"),this.$store.dispatch("auth/delete",t),this.$router.push({name:"main"})}},mounted:function(){}},l=a("KHd+"),s=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"640",outlined:""}},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-content",[a("div",{staticClass:"overline mb-4"},[t._v("Профиль пользователя")]),t._v(" "),a("v-list-item-title",{staticClass:"headline mb-1"},[t._v(t._s(t.authUser.name))]),t._v(" "),a("v-list-item-subtitle",[t._v("E-mail: "),a("b",[t._v(t._s(t.authUser.email))])]),t._v(" "),a("v-list-item-subtitle",[t._v("День рождения: "),a("b",[t._v(t._s(t.authUser.birthday)+" г.")])])],1),t._v(" "),a("v-list-item-avatar",{attrs:{tile:"",size:"164",color:"grey"}},[a("img",{attrs:{src:t.authUser.photos.simple_min,srcset:t.authUser.photos.simple_full+" 1x,"+t.authUser.photos.retina_full+" 2x"}})])],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(e){t.token_modal=!0}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-api")]),t._v(" token")],1),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:t.userEditor}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-account-edit")]),t._v(" Редактировать")],1),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.delete_modal=!0}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-account-cancel")]),t._v(" Удалить профиль")],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.token_modal,callback:function(e){t.token_modal=e},expression:"token_modal"}},[a("v-card",[a("v-card-title",[t._v("API Token")]),t._v(" "),a("v-card-text",[a("b",[t._v(t._s(t.authToken))])]),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:t.copyToken}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-content-copy")]),t._v(" Скопировать")],1),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.token_modal=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v(" Закрыть")],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.edit_modal,callback:function(e){t.edit_modal=e},expression:"edit_modal"}},[a("v-card",[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.updateProfile(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-title",[t._v("Редактор профиля")]),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{counter:42,rules:[t.rules.name],"prepend-icon":"mdi-account-badge-outline",label:"Фамилия Имя Отчество"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),a("v-text-field",{attrs:{type:"date",rules:[t.rules.birthday],"prepend-icon":"mdi-calendar-outline",label:"Дата рождения"},model:{value:t.birthday,callback:function(e){t.birthday=e},expression:"birthday"}}),t._v(" "),a("v-text-field",{attrs:{rules:[t.rules.email],"prepend-icon":"mdi-email-outline",label:"E-mail"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),a("v-file-input",{attrs:{"show-size":"",rules:[t.rules.photo],accept:"image/png, image/jpeg",placeholder:"Загрузите свою фотографию","prepend-icon":"mdi-face-recognition",label:"Фото"},model:{value:t.photo,callback:function(e){t.photo=e},expression:"photo"}}),t._v(" "),t.error?a("v-alert",{attrs:{type:"error"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),a("div",{staticClass:"text-center"},[a("v-btn",{on:{click:function(e){t.edit_modal=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v(" Закрыть")],1),t._v(" "),a("v-btn",{attrs:{disabled:!t.valid||t.loading,loading:t.loading,color:"success",type:"submit"}},[t._v("Сохранить")])],1)],1)],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.delete_modal,callback:function(e){t.delete_modal=e},expression:"delete_modal"}},[a("v-card",[a("v-card-title",[t._v("Подтвердите удаление")]),t._v(" "),a("v-card-text",[a("b",[t._v("Вы действительно хотите удалить учётную запись "+t._s(t.authUser.name))])]),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:t.deleteProfile}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-delete-forever")]),t._v(" Удалить")],1),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.delete_modal=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v(" Закрыть")],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=s.exports}}]);